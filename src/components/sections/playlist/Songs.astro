---
import type { Song } from '@lib/types/general'
import { formatSeconds } from '@utils/general'
import PlayIcon from '@icons/PlayIcon.astro'
import MenuIcon from '@icons/MenuIcon.astro'

// TODO: fix null
interface Props {
  songs: (Song | null)[]
}

const { songs } = Astro.props
---

<ul>
  {
    songs.map((track, index) => (
      <li class="flex items-center gap-5 px-5 py-2 hover:bg-primary-dark-50 group rounded-md">
        <div class="h-full min-w-[25px] text-center grid items-center">
          <span class="text-light group-hover:hidden">{index + 1}</span>
          <span class="hidden group-hover:block">
            <PlayIcon size={22} />
          </span>
        </div>

        <div class="w-full flex justify-between">
          <div>
            <p>{track?.title}</p>
            <p class="text-light text-sm">{track?.artist}</p>
          </div>

          <div class="flex items-center gap-2">
            <span class="text-sm text-light">
              {formatSeconds(track?.durationSeconds ?? 0)}
            </span>
            <button class="invisible group-hover:visible">
              <MenuIcon size={24} />
            </button>
          </div>
        </div>
      </li>
    ))
  }
</ul>
