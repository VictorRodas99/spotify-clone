---
import type { Playlist } from '@lib/types/playlist'
import type { Album, Artist } from '@lib/types/general'
import { Image } from 'astro:assets'
import { mapProfileItem } from '../../../utils/formatters'

interface Props {
  data: Playlist | Album | Artist
}

const data = await mapProfileItem({ item: Astro.props.data })
---

{
  data && (
    <li>
      <a
        href={`/${data.type}/${data.id}`}
        class="flex gap-3 p-2 hover:bg-primary-dark-50 rounded-md"
      >
        <div>
          <Image
            class:list={[
              'object-cover',
              { 'rounded-md': data.type !== 'artist' },
              { 'rounded-full': data.type === 'artist' }
            ]}
            width={50}
            height={50}
            src={data.image}
            alt={`${data.name}-${data.type}-cover`}
          />
        </div>
        <div>
          <h2 class="text-white">{data.name}</h2>
          {data.type === 'artist' ? (
            <p class="text-sm">{data.internationalizedType}</p>
          ) : (
            <p class="text-sm">
              {data.internationalizedType} &#903; {data.author}
            </p>
          )}
        </div>
      </a>
    </li>
  )
}
